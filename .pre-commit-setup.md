# Configuración de Pre-commit

Este proyecto está configurado con pre-commit para mantener la calidad del código.

## Instalación

1. Instala las dependencias de desarrollo:
```bash
pip install -r requirements-dev.txt
```

2. Instala los hooks de pre-commit (esto configurará pre-commit para escanear solo los próximos commits):
```bash
pre-commit install
```

**Nota:** Si prefieres instalar solo pre-commit sin todas las herramientas:
```bash
pip install pre-commit
pre-commit install
```

## Herramientas configuradas

- **flake8**: Linting de código Python
- **isort**: Ordenamiento automático de imports
- **black**: Formateo automático de código Python
- **bandit**: Detección de problemas de seguridad
- **pre-commit-hooks**: Varias verificaciones generales:
  - Trailing whitespace
  - End of file fixer
  - Validación de YAML, JSON, TOML
  - Detección de archivos grandes
  - Detección de conflictos de merge
  - Detección de claves privadas

## Uso

Los hooks se ejecutarán automáticamente antes de cada commit. Si algún hook falla, el commit será rechazado y deberás corregir los problemas antes de volver a intentar.

### Ejecutar manualmente

Para ejecutar pre-commit en todos los archivos (útil para verificar el estado actual):
```bash
pre-commit run --all-files
```

Para ejecutar solo en archivos staged:
```bash
pre-commit run
```

### Saltar hooks (no recomendado)

Si necesitas saltar los hooks en un commit específico (solo en casos excepcionales):
```bash
git commit --no-verify
```

## Configuración

- `.pre-commit-config.yaml`: Configuración principal de pre-commit
- `.flake8`: Configuración de flake8
- `pyproject.toml`: Configuración de black e isort

## Nota importante

Pre-commit está configurado para **solo escanear los próximos commits** (comportamiento por defecto de `pre-commit install`).

**Esto significa:**
- ✅ Solo revisará los archivos que **modifiques y agregues al staging** (`git add`)
- ✅ No revisará archivos existentes que no hayas modificado
- ✅ Los hooks se ejecutarán automáticamente antes de cada commit
- ✅ Si un hook falla, el commit será rechazado y deberás corregir los problemas

**Diferencia importante:**
- `pre-commit run` → Revisa solo archivos staged (comportamiento normal en commits)
- `pre-commit run --all-files` → Revisa TODOS los archivos (solo para verificación manual)

En commits normales, solo se revisarán los archivos que estés commitando.
